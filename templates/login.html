<!DOCTYPE html>
<html lang="kor">
<head>
    <meta charset="UTF-8">
    <!--    JQuery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- jQuery cookie 함수-->
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

    <title>login</title>

    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .header_title {
            width: 100%;
            height: 200px;

            /* background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://movie-phinf.pstatic.net/20210715_95/1626338192428gTnJl_JPEG/movie_image.jpg'); */
            background-color: green;
            background-position: center;
            background-size: cover;

            color: white;

            display: flex;

            /*flex-direction: column;*/
            /*align-items: center;*/
            /*justify-content: center*/
        }

        .header_title > h1 {
            width: 1000px;
            margin-left: 80px;
            margin-top: 50px;
        }

        .login {
            height: 20%;
            width: 700px;
        }

        .login ul li {
            list-style: none;
            background: url(../static/img/bar-1x12-b2b2b2.png) no-repeat left 11px;
            padding: 7px 10px 0;
            float: left;
            min-height: 15px;
        }

        .login ul li:first-child {
            background: none;
        }

        a {
            color: white;
            text-decoration: none;
        }

        a:hover {
            color: aqua
        }

        .loginfalse {
            display: block;
        }

        .loginture {
            display: none;
        }

        body {
            background-image: url("https://magazine.cheil.com/wp-content/uploads/2021/08/%EC%BB%A8%ED%85%90%EC%B8%A0B_960_300_02.jpg");
            background-repeat: no-repeat;
            background-position: center 10px;
            background-size: cover;
            /*top: 100px;*/
        }

        section {
            background-color: white;
            text-align: center;
            width: 500px;
            padding: 3rem;
            margin: 0 auto;
            margin-top: 5%;
            border: 1px solid black;
            border-radius: 10px;
        }

        h2 {
            margin-bottom: 2rem;
        }

        label {
            font-size: 1rem;
            font-weight: 700;
        }

        .inp {
            width: 80%;
            padding: 0.5rem;
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .btn {
            display: inline-block;
            margin: auto;
            padding: 0.5rem 1rem;
            border: 0;
            border-radius: 5px;
            font-size: 1rem;
        }

        .btn a {
            color: black;
        }


    </style>
    <script src="../static/js/logincheck.js"></script>
</head>
<body>
<header>
    <div class="header_title">
        <h1><a href="/">우리들의 운동장
        </a></h1>

        <div class="login">
            <ul class="loginfalse">
                <li>
                    <a href="/login">로그인</a>
                </li>
                <li>
                    <a href="/signup">회원가입</a>
                </li>
            </ul>
            <ul class="loginture">
                <li>
                    <a href="/login">{{ userid }}</a>
                </li>
                <li>
                    <a onclick="logout()">로그아웃</a>
                </li>
            </ul>

        </div>

    </div>
</header>
<main>
    <section>
        <h2>로그인</h2>

        <div>
            <label for="id">ID : </label>
            <input class="inp" id="idenfier" type="text" name="id">
            <br>
            <label for="pw">PW : </label>
            <input class="inp" id="password" type="password" name="pw">
            <br>
            <button onclick="login()" id="loginBtn" class="btn">로그인</button>
            <button class="btn"><a href="/signup">회원가입</a></button>
        </div>
    </section>
</main>

<script>
    $(document).ready(function () {
        $(".loginfalse").hide()
        $(".loginture").hide()
        check_login()
    })

    let id = $("#idenfier")
    let pw = $("#password")

    // 로그인 시도 버튼
    function login() {
        $.ajax({
            type: "POST",
            url: "/login",
            data: {
                id_give: id.val(),
                pw_give: pw.val()
            },
            success: function (response) {
                // 서버에서 로그인 정보가 일치하면 토큰 정보를 받아 쿠키로 로그인토큰을 생성(head에 cookie 생성하는 CDN 필요)
                // 콘솔창 옆 애플리케이션 탭 쿠키 탭에서 생성된 로그인 정보 쿠키 확인 가능
                $.cookie('mytoken', response['token']), {path: '/'};
                alert(response['msg'])
                window.location.replace("/")
            }
        })
    }

    // 잠깐 회원가입처럼 디비 저장해서 로그인기능 확인하기위해 만든것 나중에 회원가입페이지로 이동 버튼으로 사용예정
    {#function create() {#}
    {#    $.ajax({#}
    {#        type: "POST",#}
    {#        url: "/create",#}
    {#        data: {#}
    {#            id_give: id.val(),#}
    {#            pw_give: pw.val()#}
    {#        },#}
    {#        success: function (response) {#}
    {#            console.log(response)#}
    {#        }#}
    {#    })#}
    {#{#}


</script>
</body>
</html>